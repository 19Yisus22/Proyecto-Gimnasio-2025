<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mis Clases | Entrenador</title>
<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='uploads/icon.png') }}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles_trainer/style_clases_entrenador.css') }}">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>const ID_USUARIO="{{ session['user']['id_usuario'] if session.get('user') else '' }}";</script>

</head>

<body>

    {% include 'navbar.html' %}
    
<div class="content-wrapper">
<div class="container-central mt-4">
<div class="card-title-center mb-4"><div class="bi bi-calendar-event me-2"> Mis Clases</div></div>
<div class="card mb-3">
<div class="card-body">
<h5>Seleccionar Miembro</h5>
<div class="row g-2 align-items-end">
<div class="col-md-6">
<select id="miembroSelect" class="form-control w-100">
<option value="">Selecciona miembro</option>
</select>
</div>
<div class="col-md-6">
<button class="btn btn-primary w-100" id="btnCargarDatos" onclick="cargarDatosMiembro()">Cargar Datos</button>
</div>
</div>
<div class="alert alert-warning mt-3" role="alert" id="alertaMiembroNoSeleccionado" style="display:none;">
Por favor, selecciona un miembro y haz clic en "Cargar Datos" para ver la información.
</div>
</div>
</div>
<div class="card mb-3">
<div class="card-body">
<h5>Calendario de Recordatorios</h5>
<table class="table table-bordered text-center" id="calendarTable">
<thead>
<tr><th>L</th><th>M</th><th>M</th><th>J</th><th>V</th><th>S</th><th>D</th></tr>
</thead>
<tbody id="calendarBody"></tbody>
</table>
</div>
</div>
<div class="card mb-3">
<div class="card-body">
<h5>Reservas de Miembros</h5>
<div id="listaReservas" class="table-responsive">
<table class="table table-striped reporte-table">
<thead>
<tr>
<th>Clase</th>
<th>Entrenador</th>
<th>Asistencia</th>
<th>Estado</th>
<th>Fecha Creación</th>
<th>Acciones</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</div>
<div class="card mb-3">
<div class="card-body">
<h5>Seguimiento de Progreso</h5>
<div id="seguimientoProgreso" class="mb-3">
<div class="row g-2 mb-2">
<div class="col-md-3"><input type="date" id="fechaProgreso" class="form-control"></div>
<div class="col-md-3"><input type="number" step="0.01" id="pesoMiembro" class="form-control" placeholder="Peso (kg)"></div>
<div class="col-md-3"><input type="number" step="0.01" id="grasaCorporal" class="form-control" placeholder="Grasa corporal (%)"></div>
<div class="col-md-3"><input type="number" step="0.01" id="masaMuscular" class="form-control" placeholder="Masa muscular (kg)"></div>
<div class="col-md-3"><input type="number" step="0.01" id="caloriasQuemadas" class="form-control" placeholder="Calorías quemadas"></div>
<div class="col-md-3"><input type="number" step="0.01" id="fuerza" class="form-control" placeholder="Fuerza (nivel)"></div>
<div class="col-md-3"><input type="number" step="0.01" id="resistencia" class="form-control" placeholder="Resistencia (nivel)"></div>
</div>
<div class="row g-2 mb-2">
<div class="col-md-9">
<select id="objetivoPersonal" class="form-control" onchange="actualizarGrafica(); actualizarTablaProgreso();">
<option value="bajar_peso">Bajar Peso</option>
<option value="ganar_masa_muscular">Ganar Masa Muscular</option>
<option value="tonificacion">Tonificación / Acondicionamiento</option>
<option value="ganar_fuerza">Ganar Fuerza / Resistencia</option>
</select>
</div>
</div>
<div class="row g-2 mb-2">
<div class="col-md-12"><textarea id="notasProgreso" class="form-control" placeholder="Notas adicionales"></textarea></div>
</div>
<div class="row g-2">
<div class="col-md-3"><button id="registrarProgresoBtn" class="btn btn-success w-100" onclick="registrarProgreso()">Registrar Progreso</button></div>
</div>
</div>
<div class="border rounded p-2 mt-3 chart-container">
<table class="table table-bordered text-center reporte-table" id="tablaProgreso">
<thead><tr id="tablaHeader"></tr></thead>
<tbody id="tablaBody"></tbody>
</table>
</div>
<div class="border rounded p-2 mt-3 chart-container">
<canvas id="graficoProgreso" style="height:300px"></canvas>
</div>
</div>
</div>
<div class="card mb-3">
<div class="card-body">
<h5>Notificaciones a Miembros</h5>
<div class="row g-2">
<div class="col-md-3"><input type="text" id="tituloNotificacion" class="form-control" placeholder="Título"></div>
<div class="col-md-3"><input type="text" id="descNotificacion" class="form-control" placeholder="Descripción"></div>
<div class="col-md-3">
<select id="tipoNotificacion" class="form-control">
<option value="recordatorio">Recordatorio</option>
<option value="inasistencias">Inasistencias</option>
<option value="asistencia">Asistencia</option>
</select>
</div>
<div class="col-md-3"><button class="btn btn-info w-100" onclick="enviarNotificacion()">Enviar Notificación</button></div>
<div class="col-12 mt-3" id="historialSection" style="display:none">
<h6>Historial de Notificaciones</h6>
<div id="historialNotificaciones" class="d-flex flex-column gap-2"></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="modal fade" id="modalCreate" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content bg-dark text-white">
<div class="modal-header">
<h5 class="modal-title" id="modalCreateTitle">Crear Recordatorio</h5>
<button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<input type="text" id="modalInputTitulo" class="form-control mb-2" placeholder="Título">
<textarea id="modalInputDescripcion" class="form-control mb-2" placeholder="Descripción"></textarea>
<select id="modalInputTipo" class="form-control mb-2">
<option value="clases">CLASE</option>
<option value="promociones">PROMOCIONES</option>
<option value="membresia">MEMBRESIA</option>
<option value="recordatorio">OTRO</option> 
</select>
<input type="time" id="modalInputHora" class="form-control mb-2">
</div>
<div class="modal-footer">
<button id="modalEliminarBtn" class="btn btn-danger" onclick="eliminarRecordatorio()">Eliminar</button>
<button class="btn btn-success" onclick="guardarRecordatorio()">Guardar</button>
</div>
</div>
</div>
</div>
<div class="modal fade" id="modalMultiple" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content bg-dark text-white">
<div class="modal-header">
<h5 class="modal-title">Recordatorios del Día</h5>
<button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body" id="modalMultipleBody"></div>
<div class="modal-footer">
<button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
</div>
</div>
</div>
</div>
{% include 'footer.html' %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/funtions_trainer/gestion_clases.js') }}"></script>

</body>
</html>