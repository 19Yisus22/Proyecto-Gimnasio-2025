<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Publicidad | Administración</title>
<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='uploads/icon.png') }}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles_admin/style_gestion_publicidad.css') }}">
</head>

<body>

{% include 'navbar.html' %}

<div class="container-central">

  <div class="card-title-marketing mb-4">Sistema de Marketing</div>

  <div class="card mb-3">
    <div class="card-body">
      <h5>Idioma del Sistema</h5>
      <div class="row g-2">
        <div class="col-md-3">
          <select id="idiomaSistema" class="form-control">
            <option value="es">Español</option>
            <option value="en">Inglés</option>
          </select>
        </div>
        <div class="col-md-12 mt-2">
          <button class="btn btn-success w-100" onclick="guardarIdioma()">Guardar Configuración</button>
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-3">
    <div class="card-body">
      <h5>Sistema de Notificaciones</h5>
      <p>Muestra notificaciones personalizadas en la página de inicio:</p>

      <div class="row g-2">
        <div class="col-md-3">
          <div id="previewNotificacion" class="preview-img-box" style="display:none">
            <img id="previewNotificacionImg">
          </div>
          <input type="file" id="archivoNotificacion" class="form-control">
        </div>

        <div class="col-md-3">
          <input type="text" id="tituloNotificacion" class="form-control" placeholder="Título">
        </div>

        <div class="col-md-3">
          <input type="text" id="descNotificacion" class="form-control" placeholder="Descripción">
        </div>

        <div class="col-md-3 mt-1">
          <button class="btn btn-info w-100" onclick="crearNotificacion()">Crear Notificación</button>
        </div>

        <div class="col-md-12 mt-3">
          <h6>Alertas existentes</h6>
          <div id="contenedorAlertas" class="d-flex flex-column gap-2"></div>
        </div>
      </div>

    </div>
  </div>

  <div class="card mb-3">
    <div class="card-body">

      <h5>Sistema de Publicidad</h5>

      <div class="row g-2">

        <div class="col-12 mb-2"><strong>Carrusel</strong></div>
        <div id="carruselContainer" class="col-12"></div>

        <div class="col-12 mb-2">
          <button class="btn btn-primary w-100" onclick="agregarCarrusel()">Agregar nueva sección carrusel</button>
        </div>

        <div class="col-12 mt-3 mb-2"><strong>Secciones</strong></div>
        <div id="seccionesContainer" class="col-12"></div>

        <div class="col-12 mb-2">
          <button class="btn btn-primary w-100" onclick="agregarSeccion()">Agregar nueva sección</button>
        </div>

        <div class="col-12 mt-3 mb-2"><strong>Subtítulo de Inicio</strong></div>

        <div class="col-md-12 mt-3">
          <textarea id="infoInicio" class="form-control mb-2" rows="3"></textarea>
          <button id="btnGuardarMarketing" class="btn btn-dark w-100" onclick="guardarMarketing()">Compartir publicidad en el inicio</button>
        </div>

        <div class="col-md-12 mt-4">
          <h5>Previsualización de la publicidad</h5>
          <p>Muestra una vista previa de las imágenes, títulos y descripción de la publicidad montada:</p>

          <div id="previewInicio" class="p-2 border rounded">

            <div id="previewCarrusel" class="carousel slide mb-2" data-bs-ride="carousel">
              <div class="carousel-inner"></div>

              <button class="carousel-control-prev" type="button" data-bs-target="#previewCarrusel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
                <span class="visually-hidden">Anterior</span>
              </button>

              <button class="carousel-control-next" type="button" data-bs-target="#previewCarrusel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
                <span class="visually-hidden">Siguiente</span>
              </button>
            </div>

            <div id="previewSecciones" class="d-flex flex-wrap mb-2"></div>
            <div id="previewInfo" class="bg-light p-2 rounded"></div>

          </div>
        </div>

      </div>
    </div>
  </div>

</div>

<div id="toastContainer" class="position-fixed p-3 top-0 end-0"></div>

<div class="modal fade" id="modalEditarNotificacion">
  <div class="modal-dialog">
    <div class="modal-content bg-dark text-white">

      <div class="modal-header">
        <h5 class="modal-title">Editar Notificación</h5>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <div class="text-center mb-3">
          <img id="modalImgActual" style="max-height:150px;border-radius:8px">
        </div>

        <input type="file" id="modalArchivoNuevo" class="form-control mb-2">
        <input type="text" id="modalTitulo" class="form-control mb-2" placeholder="Título">
        <input type="text" id="modalDescripcion" class="form-control mb-2" placeholder="Descripción">
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-success" onclick="guardarEdicionNotificacion()">Guardar Cambios</button>
      </div>

    </div>
  </div>
</div>

{% include 'footer.html' %}

<script src="{{ url_for('static', filename='js/funtions_admin/gestion_publicidad.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
